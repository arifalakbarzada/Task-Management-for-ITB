import{G as I,h as g,l as A,a as c,j as e,w as C,x as E,y as P}from"./index-CYtOorbY.js";import{e as p,C as $,a as V,c as G,d as u,S as f}from"./DefaultLayout-BVsQPo94.js";import{C as N,a as v,b as T,c as w,d as y}from"./CModalTitle-C7VZlUGm.js";function R(h){return I({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"},child:[]}]})(h)}const q=()=>{const h=g(s=>s.tasks.items),j=g(s=>s.users.items),o=A(),[S,i]=c.useState(!1),[a,d]=c.useState({title:"",description:"",owner:"",deadline:"",status:"Pending",userId:""}),[t,r]=c.useState(null),[n,x]=c.useState(null),D=()=>{a.title&&a.owner&&(o(P(a)),i(!1),d({title:"",description:"",owner:"",deadline:"",status:"Pending",userId:""}))},b=()=>{t&&(o(C(t)),r(null),i(!1))},k=s=>{f.fire({title:"Are you sure?",text:"This task will be permanently deleted.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(l=>{l.isConfirmed&&(o(E(s)),f.fire("Deleted!","The task has been deleted.","success"))})},M=(s,l)=>{o(C({...l,status:s}))},B={position:"relative",display:"flex",justifyContent:"center",alignItems:"center"};return e.jsxs("div",{className:"container",children:[e.jsx("h2",{className:"my-4",children:"Sprint Task Management"}),e.jsx(p,{color:"primary",onClick:()=>i(!0),children:"Add Task"}),e.jsxs("table",{className:"table mt-3 text-center",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("p",{className:"p-2",children:"Title"})}),e.jsx("th",{children:e.jsx("p",{className:"p-2",children:"Assigned To"})}),e.jsx("th",{children:e.jsx("p",{className:"p-2",children:"Deadline"})}),e.jsx("th",{children:e.jsx("p",{className:"p-2",children:"Status"})}),e.jsx("th",{children:e.jsx("p",{className:"p-2",children:"Actions"})})]})}),e.jsx("tbody",{children:h.map(s=>e.jsxs("tr",{children:[e.jsxs("td",{children:[" ",e.jsx("p",{className:"p-2",children:s.title})]}),e.jsxs("td",{children:[" ",e.jsx("p",{className:"p-2",children:s.owner})]}),e.jsxs("td",{children:[" ",e.jsx("p",{className:"p-2",children:s.deadline})]}),e.jsx("td",{children:e.jsxs("select",{value:s.status,onChange:l=>M(l.target.value,s),className:"border rounded-md p-2 bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"Completed",children:"Completed"})]})}),e.jsx("td",{children:e.jsxs($,{children:[e.jsxs(V,{className:"p-0 border-0 bg-transparent",style:{position:"relative"},children:[e.jsx(R,{style:B}),e.jsx("style",{children:`
      .dropdown-toggle::after {
        display: none !important;
      }
    `})]}),e.jsxs(G,{children:[e.jsx(u,{onClick:()=>{r(s),i(!0)},children:"Edit"}),e.jsx(u,{onClick:()=>k(s.id),children:"Delete"}),e.jsx(u,{onClick:()=>x(s),children:"View"})]})]})})]},s.id))})]}),e.jsxs(N,{visible:S,onClose:()=>i(!1),children:[e.jsx(v,{children:e.jsx(T,{children:t?"Edit Task":"Add Task"})}),e.jsxs(w,{children:[e.jsx("input",{type:"text",placeholder:"Title",className:"form-control",value:t?t.title:a.title,onChange:s=>t?r({...t,title:s.target.value}):d({...a,title:s.target.value})}),e.jsx("textarea",{placeholder:"Description",className:"form-control mt-2",value:t?t.description:a.description,onChange:s=>t?r({...t,description:s.target.value}):d({...a,description:s.target.value})}),e.jsxs("select",{className:"form-control mt-2",value:t?t.owner:a.owner,onChange:s=>{const l=j.find(m=>`${m.name} ${m.surName}`===s.target.value);t?r({...t,owner:s.target.value,userId:(l==null?void 0:l.id)||""}):d({...a,owner:s.target.value,userId:(l==null?void 0:l.id)||""})},children:[e.jsx("option",{value:"",children:"Select User"}),j.map(s=>s.role==="user"&&e.jsxs("option",{value:`${s.name} ${s.surName}`,children:[s.name," ",s.surName]},s.id))]}),e.jsx("input",{type:"date",className:"form-control mt-2",value:t?t.deadline:a.deadline,onChange:s=>t?r({...t,deadline:s.target.value}):d({...a,deadline:s.target.value})})]}),e.jsx(y,{}),e.jsx(p,{color:"primary",onClick:t?b:D,children:t?"Save Changes":"Add Task"})]}),e.jsxs(N,{visible:!!n,onClose:()=>x(null),children:[e.jsx(v,{children:e.jsx(T,{children:"Task Details"})}),e.jsxs(w,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Title:"})," ",n==null?void 0:n.title]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",n==null?void 0:n.description]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Assigned To:"})," ",n==null?void 0:n.owner]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Deadline:"})," ",n==null?void 0:n.deadline]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",n==null?void 0:n.status]})]}),e.jsx(y,{children:e.jsx(p,{color:"secondary",onClick:()=>x(null),children:"Close"})})]})]})};export{q as default};
